<div class="container mt-4">
  <div class="card shadow">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <div>
        <span class="me-2">🖊️</span>
        <strong>Gerador de Cenário de Teste</strong>
      </div>
      <button class="btn btn-outline-light btn-sm" (click)="irParaCenarios()">
        👀 Visualizar Cenários
      </button>
    </div>
    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="gerar()">
        <div class="mb-3">
          <label class="form-label">Título</label>
          <input
            type="text"
            formControlName="titulo"
            class="form-control"
            placeholder="Digite o título do cenário"
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Regra de Negócio</label>
          <textarea
            formControlName="regraDeNegocio"
            rows="3"
            class="form-control"
            placeholder="Descreva a regra de negócio"
          ></textarea>
        </div>

        <div class="d-grid">
          <button
            type="submit"
            class="btn btn-success"
            [disabled]="form.invalid || loading"
          >
            🚀 Gerar Cenário
          </button>
        </div>
      </form>

      <!-- Mensagem de sucesso -->
      <div *ngIf="successMessage" class="alert alert-success mt-3 text-center">
        {{ successMessage }}
      </div>
    </div>
  </div>

  <!-- Botão flutuante -->
  <div class="chat-fab" (click)="mostrarChat = !mostrarChat">
    💬
  </div>

  <!-- Chat embutido -->
  <div class="chat-container" *ngIf="mostrarChat">
    <iframe
      src="https://astra.datastax.com/langflow/605a2b2b-fb1f-4886-a8d4-01021ebda04a/flow/a4291ec5-2297-41d6-8ac4-643072d6a337"
      frameborder="0"
      width="100%"
      height="100%">
    </iframe>
  </div>

</div>
